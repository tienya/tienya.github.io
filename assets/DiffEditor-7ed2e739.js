import{l as s,W as d,a,b as n,c as f,d as c,e as o}from"./ts.worker-a478ca6e.js";import{_ as u,p as l,q as h,Q as r,w as g}from"./framework-c9763b50.js";import"./mermaid-c798b724-95c3f3a8.js";s.register({id:"vs.editor.nullLanguage"});s.setLanguageConfiguration("vs.editor.nullLanguage",{});self.MonacoEnvironment={getWorker(e,t){return t==="json"?new d:t==="css"||t==="scss"||t==="less"?new a:t==="html"||t==="handlebars"||t==="razor"?new n:t==="typescript"||t==="javascript"?new f:new c}};const p={name:"DiffEditor",props:{diff1:{type:String,default:""},diff2:{type:String,default:""},mode:{type:String,default:"text/plain"},autoHeight:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},data(){return{}},watch:{diff1(e){this.setDiff1(e)},diff2(e){this.setDiff2(e)},mode(e){this.setMode(e)}},mounted(){this.initEditor()},beforeDestroy(){this.destroyEditor()},methods:{getEditor(){return this.$codeEditor},setEditor(e){this.$codeEditor=e},initEditor(){this.getEditor()&&this.destroyEditor();const e=o.createDiffEditor(this.$refs.monaco,{enableSplitViewResizing:!1,automaticLayout:!0,theme:"vs",fontSize:13,originalEditable:!0,renderSideBySide:!0});this.setEditor(e),this.setMode()},setDiff1(e){const i=this.getEditor().getModel();i.original.getValue()!==e&&i.original.setValue(e)},setDiff2(e){const i=this.getEditor().getModel();i.modified.getValue()!==e&&i.modified.setValue(e)},setMode(){const e=o.createModel(this.diff1,this.mode),t=o.createModel(this.diff2,this.mode);e.onDidChangeContent(()=>{this.$emit("update:diff1",e.getValue())}),t.onDidChangeContent(()=>{this.$emit("update:diff2",t.getValue())}),this.$codeEditor.setModel({original:e,modified:t})},destroyEditor(){const e=this.getEditor();e&&(e.dispose(),this.setEditor(null))}}},m={class:"code-editor-wrap"},_={ref:"monaco",class:"editor"};function E(e,t,i,$,y,D){return l(),h("div",m,[r("div",{class:g(["code-editor",{"auto-height":i.autoHeight,border:i.border}])},[r("div",_,null,512)],2)])}const w=u(p,[["render",E],["__scopeId","data-v-251ef4ea"],["__file","DiffEditor.vue"]]);export{w as default};

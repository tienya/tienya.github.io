import{_ as f,M as a,p as m,q as u,Q as s,R as _,t as n,ad as p,N as i,V as h}from"./framework-b01e3c2f.js";import{f as y}from"./sqlFormatter-ec5e07c1.js";import"./mermaid-c798b724-509d9c22.js";function q(){try{if(window)return localStorage.getItem("parse:sql")}catch{}}function v(e){try{window&&localStorage.setItem("parse:sql",e)}catch{}}const b={data(){let e=q();return[void 0,null].includes(e)&&(e="SELECT * FROM tbl WHERE foo = 'bar' AND abc IN (123);"),{loading:!1,sql:e}},watch:{sql(e){v(e)}},mounted(){},methods:{foldLevel(){this.$refs.editor.foldLines(2)},unfoldCode(){this.$refs.editor.unfoldLines()},minifySQL(){try{const e=this.sql.split(`
`).map(t=>t.trim()).filter(t=>t).join(" ");this.sql=e}catch(e){toastr.error(e.message)}},prettifySQL(e=!1){try{const t=y(this.sql,{language:"mysql",tabWidth:2,keywordCase:"upper",linesBetweenQueries:2});this.sql=t}catch(t){toastr.error(t.message)}}}},L=s("h1",{id:"sql-formatter",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#sql-formatter","aria-hidden":"true"},"#"),n(" SQL Formatter")],-1),g={class:"action-bar",style:{margin:"20px 0"}},C=s("span",null,"Format",-1),x=[C],S={class:"BtnGroup"},w=s("span",null,"Fold",-1),Q=[w],k=s("span",null,"Unfold",-1),B=[k],E=s("span",null,"Minify",-1),N=[E];function M(e,t,V,F,r,l){const d=a("MonacoEditor"),c=a("ClientOnly");return m(),u("div",null,[L,s("form",{onSubmit:t[4]||(t[4]=p(()=>{},["prevent"])),style:{margin:"20px 0"}},[_(` <div>
    <textarea class="form-control" rows="6" placeholder="SQL" v-model="sql" style="width: 100%;"></textarea>
  </div> `),s("div",g,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...o)=>l.prettifySQL&&l.prettifySQL(...o))},x),n("   "),s("div",S,[s("button",{class:"BtnGroup-item btn",onClick:t[1]||(t[1]=(...o)=>l.foldLevel&&l.foldLevel(...o))},Q),s("button",{class:"BtnGroup-item btn",onClick:t[2]||(t[2]=(...o)=>l.unfoldCode&&l.unfoldCode(...o))},B)]),n("   "),s("button",{class:"btn",onClick:t[3]||(t[3]=(...o)=>l.minifySQL&&l.minifySQL(...o))},N)])],32),i(c,null,{default:h(()=>[i(d,{ref:"editor",mode:"mysql",style:{height:"calc(100vh - 230px)","min-height":"500px"},value:r.sql,"onUpdate:value":t[5]||(t[5]=o=>r.sql=o)},null,8,["value"])]),_:1})])}const O=f(b,[["render",M],["__file","sql.html.vue"]]);export{O as default};
